.. include:: /include/substitution.rst

****************
Object Detection
****************

* :ref:`detection-config-files-mainconfig`
* :ref:`detection-config-files-datamodule`
* :ref:`detection-config-files-trainer`

Main Config
===========

Config File: ``peekingduck/training/configs/config.yaml``

+---------------------------------------+-----------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Key                                   | Value                                               | Description                                                                                                                                                |
+=======================================+=====================================================+============================================================================================================================================================+
| :mod:`device`                         | “auto”                                              | Device used for training.                                                                                                                                  |
+---------------------------------------+-----------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------+
| :mod:`project_name`                   | “your_project_name”                                 | your_project_name will be used as your output folder                                                                                                       |
+---------------------------------------+-----------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------+
| :mod:`debug`                          | True                                                | Turn on the debug mode to test the pipeline with a fraction of the dataset and fewer epochs, without logging the experiment results into Weights & Biases. |
+---------------------------------------+-----------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------+
| :mod:`framework`                      | “tensorflow”                                        | Framework used for training.                                                                                                                               |
+---------------------------------------+-----------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------+
| :mod:`random_state`                   | 11                                                  | Any number above 0                                                                                                                                         |
+---------------------------------------+-----------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------+
| :mod:`view_only`                      | False                                               | Option to only view the model architecture without executing the training.                                                                                 |
+---------------------------------------+-----------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------+
| :mod:`defaults`                       |                                                     |                                                                                                                                                            |
+--+------------------------------------+-----------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------+
|  | :mod:`use_case`                    | classification                                      | Type of the model to be trained and used.                                                                                                                  |
+--+------------------------------------+-----------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------+
|  | :mod:`data_module`                 | cifar10                                             | rsna | cifar10 | vegfru5 | vegfru15 | vegfru25 | “main-data_module-filename”                                                                               |
+--+------------------------------------+-----------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------+
|  | :grey:`model`                      | :grey:`${use_case}`                                 |                                                                                                                                                            |
+--+------------------------------------+-----------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------+
|  | :grey:`trainer`                    | :grey:`${use_case}`                                 |                                                                                                                                                            |
+--+------------------------------------+-----------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------+
|  | :grey:`callbacks`                  | :grey:`${use_case}`                                 |                                                                                                                                                            |
+--+------------------------------------+-----------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------+
|  | :grey:`metrics`                    | :grey:`${use_case}`                                 |                                                                                                                                                            |
+--+------------------------------------+-----------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------+
|  | :grey:`model_analysis`             | :grey:`${use_case}`                                 |                                                                                                                                                            |
+--+------------------------------------+-----------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------+
|  | :grey:`stores`                     | :grey:`${use_case}`                                 |                                                                                                                                                            |
+--+------------------------------------+-----------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------+
|  | :grey:`override hydra/job_logging` | :grey:`custom`                                      |                                                                                                                                                            |
+--+------------------------------------+-----------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------+
| :grey:`hydra`                         |                                                     |                                                                                                                                                            |
+--+------------------------------------+-----------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------+
|  | :grey:`run`                        |                                                     |                                                                                                                                                            |
+--+-----------+------------------------+-----------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------+
|  |           | :grey:`dir`            | :grey:`outputs/${project_name}/${stores.unique_id}` |                                                                                                                                                            |
+--+-----------+------------------------+-----------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------+
|  | :grey:`sweep`                      |                                                     |                                                                                                                                                            |
+--+-----------+------------------------+-----------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------+
|  |           | :grey:`dir`            | :grey:`outputs/${project_name}/${stores.unique_id}` |                                                                                                                                                            |
+--+-----------+------------------------+-----------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------+
|  |           | :grey:`subdir`         | :grey:`${hydra.job.num}`                            |                                                                                                                                                            |
+--+-----------+------------------------+-----------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------+

----------

.. _classification-config-files-datamodule:

Data Module
===========

Resample / Train Test Split
---------------------------

Split arrays or matrices into random train and test subsets.
Config File : 
``peekingduck/training/configs/data_module/detection.yaml``

+---------------------------------------------------------+----------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Key                                                     | Value                                              | Description                                                                                                                                                                                                                                                                                             |
+=========================================================+====================================================+=========================================================================================================================================================================================================================================================================================================+
| :mod:`resample_strategy`                                |                                                    | Quick utility that wraps input validation, next(ShuffleSplit().split(X, y)), and application to input data into a single call for splitting (and optionally sub-sampling) data into a one-liner.                                                                                                        |
+--------------------------+------------------------------+----------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
|                          | :grey:`_target_`             | :grey:`sklearn.model_selection.train_test_split`   |                                                                                                                                                                                                                                                                                                         |
+--------------------------+------------------------------+----------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
|                          | :mod:`_partial_`             | True                                               | Partial initialization of function to allow stratify in the dataset.                                                                                                                                                                                                                                    |
+--------------------------+------------------------------+----------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
|                          | :mod:`test_size`             | 0.125                                              | If float, should be between 0.0 and 1.0 and represent the proportion of the dataset to include in the test split. If int, represents the absolute number of test samples. If None, the value is set to the complement of the train size. If train_size is also None, it will be set to 0.25.            |
+--------------------------+------------------------------+----------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
|                          | :mod:`shuffle`               | True                                               | Whether or not to shuffle the data before splitting.                                                                                                                                                                                                                                                    |
+--------------------------+------------------------------+----------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
|                          | :grey:`random_state`         | :grey:`${random_state}`                            | Controls the shuffling applied to the data before applying the split. Pass an int for reproducible output across multiple function calls.                                                                                                                                                               |
+--------------------------+------------------------------+----------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+



----------


.. _classification-config-files-trainer:

Trainer
=======


